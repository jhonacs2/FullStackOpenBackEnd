(this.webpackJsonptelguide=this.webpackJsonptelguide||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(15),i=n.n(c),o=n(3),u=n(0),a=function(e){var t=e.filterName,n=e.setFilterName;return Object(u.jsxs)(u.Fragment,{children:["Filter Shown with: ",Object(u.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})};function s(e){var t=e.notification,n={backgroundColor:"green",padding:"1rem",fontSize:"16px",border:"greenyellow"};return null===t?null:(t.includes("delete")&&(n.backgroundColor="red"),Object(u.jsx)("div",{style:n,children:Object(u.jsxs)("p",{children:[t," was added to phonebook"]})}))}var j=n(6),d=n(4),l=n.n(d),b="/api/persons",f=function(e){return l.a.post(b,e).then((function(e){return e.data}))},m=function(){return l.a.get(b).then((function(e){return e.data}))},O=function(e){return l.a.delete("".concat(b,"/").concat(e)).then((function(e){return e}))},h=function(e,t){return l.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){var t=e.setnewName,n=e.newName,r=e.number,c=e.setNumber,i=e.setPersons,a=e.persons,s=e.setNotification;return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var u={name:n,number:r.toString()},d=a.map((function(e){return e.name})).includes(n),l=a.filter((function(e){return e.name===n})),b=Object(o.a)(l,1)[0];if(d){if(window.confirm("User is already added to phonebook, do you want replace it")){var m=Object(j.a)(Object(j.a)({},b),{},{number:parseInt(r)});h(b.id,m).then((function(e){i(a.map((function(t){return t.id===b.id?e:t})))}))}}else f(u).then((function(e){i(a.concat(e)),t(""),c(0)})),s(u.name),setTimeout((function(){s(null)}),4e3)},children:[Object(u.jsxs)("div",{children:["Name: ",Object(u.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}}),Object(u.jsx)("br",{}),"Number:"," ",Object(u.jsx)("input",{value:r,onChange:function(e){c(e.target.value)},type:"text"})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add"})})]})},x=function(e){var t=e.person,n=e.deletePerson;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("p",{children:[t.name," ",t.number," ",Object(u.jsx)("button",{onClick:n,children:"Delete"})]})})},v=function(e){var t=e.persons,n=e.setPersons,r=e.setNotification;return Object(u.jsx)(u.Fragment,{children:t.map((function(e,c){return Object(u.jsx)(x,{person:e,deletePerson:function(){return function(e){var c=t.find((function(t){return t.id===e})).name;window.confirm("delete ".concat(c))&&O(e).then((function(r){return n(t.filter((function(t){return t.id!==e&&t})))})).catch((function(i){r("".concat(c," was already delete from server")),setTimeout((function(){r(null)}),4e3),n(t.filter((function(t){return t.id!==e})))}))}(e.id)}},c)}))})},g=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(""),j=Object(o.a)(i,2),d=j[0],l=j[1],b=Object(r.useState)(0),f=Object(o.a)(b,2),O=f[0],h=f[1],x=Object(r.useState)(""),g=Object(o.a)(x,2),w=g[0],N=g[1],S=Object(r.useState)(null),k=Object(o.a)(S,2),y=k[0],C=k[1];Object(r.useEffect)((function(){m().then((function(e){return c(e)}))}),[]);var P=""===w?n:n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)("br",{}),Object(u.jsx)(a,{filterName:w,setFilterName:N}),Object(u.jsx)(s,{notification:y}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(p,{setnewName:l,newName:d,number:O,setNumber:h,setPersons:c,persons:n,setNotification:C}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(v,{persons:P,setPersons:c,setNotification:C})]})};n(39);i.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ccd1c572.chunk.js.map