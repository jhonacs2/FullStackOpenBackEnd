(this.webpackJsonptelguide=this.webpackJsonptelguide||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(15),o=n.n(c),i=n(3),a=n(0),u=function(e){var t=e.filterName,n=e.setFilterName;return Object(a.jsxs)(a.Fragment,{children:["Filter Shown with: ",Object(a.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})};function s(e){var t=e.notification;console.log(t);var n={backgroundColor:"green",padding:"1rem",fontSize:"16px",border:"greenyellow"};return null===t?null:((t.includes("delete")||t.includes("error")||t.includes("ValidationError"))&&(n.backgroundColor="red"),Object(a.jsx)("div",{style:n,children:Object(a.jsx)("p",{children:t})}))}var l=n(6),d=n(4),j=n.n(d),f="/api/persons",b=function(e){return j.a.post(f,e).then((function(e){return e.data}))},m=function(){return j.a.get(f).then((function(e){return e.data}))},h=function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))},O=function(e,t){return j.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){var t=e.setnewName,n=e.newName,r=e.number,c=e.setNumber,o=e.setPersons,u=e.persons,s=e.setNotification;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={name:n,number:r.toString()},d=u.map((function(e){return e.name})).includes(n),j=u.filter((function(e){return e.name===n})),f=Object(i.a)(j,1)[0];if(d){if(window.confirm("User is already added to phonebook, do you want replace it")){var m=Object(l.a)(Object(l.a)({},f),{},{number:r});O(f.id,m).then((function(e){o(u.map((function(t){return t.id===f.id?e:t})))})).catch((function(e){var t=e.response.data;s("".concat(t.error))}))}}else b(a).then((function(e){o(u.concat(e)),t(""),c(0),s("".concat(a.name," was added to phonebook"))})).catch((function(e){var t=e.response.data;s("".concat(t.error))})),setTimeout((function(){s(null)}),4e3)},children:[Object(a.jsxs)("div",{children:["Name: ",Object(a.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}}),Object(a.jsx)("br",{}),"Number:"," ",Object(a.jsx)("input",{value:r,onChange:function(e){c(e.target.value)},type:"text"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"Add"})})]})},x=function(e){var t=e.person,n=e.deletePerson;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:[t.name," ",t.number," ",Object(a.jsx)("button",{onClick:n,children:"Delete"})]})})},v=function(e){var t=e.persons,n=e.setPersons,r=e.setNotification;return Object(a.jsx)(a.Fragment,{children:t.map((function(e,c){return Object(a.jsx)(x,{person:e,deletePerson:function(){return function(e){var c=t.find((function(t){return t.id===e})).name;window.confirm("delete ".concat(c))&&h(e).then((function(o){n(t.filter((function(t){return t.id!==e&&t}))),r("".concat(c," delete")),setTimeout((function(){r(null)}),4e3)})).catch((function(o){r("".concat(c," was already delete from server")),setTimeout((function(){r(null)}),4e3),n(t.filter((function(t){return t.id!==e})))}))}(e.id)}},c)}))})},g=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),l=Object(i.a)(o,2),d=l[0],j=l[1],f=Object(r.useState)(0),b=Object(i.a)(f,2),h=b[0],O=b[1],x=Object(r.useState)(""),g=Object(i.a)(x,2),w=g[0],N=g[1],S=Object(r.useState)(null),k=Object(i.a)(S,2),y=k[0],C=k[1];Object(r.useEffect)((function(){m().then((function(e){return c(e)}))}),[]);var P=""===w?n:n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)("br",{}),Object(a.jsx)(u,{filterName:w,setFilterName:N}),Object(a.jsx)(s,{notification:y}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(p,{setnewName:j,newName:d,number:h,setNumber:O,setPersons:c,persons:n,setNotification:C}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(v,{persons:P,setPersons:c,setNotification:C})]})};n(39);o.a.render(Object(a.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.08b2b534.chunk.js.map